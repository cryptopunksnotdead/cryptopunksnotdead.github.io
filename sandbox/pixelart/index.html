<head>

  <script>
     //////////////
     // pixelart ascii format
     //   support comments starting with #
     //         and allow empty lines
     //    support leading trailing spaces (get auto-trimmed)
     //    auto-trim leading and trailing whitespaces & emptylines in design
     //

     function parseAscii( str ) {
       let ary = [];
       str.trim().split( "\n" ).forEach( line => {
            line = line.trim();
            if( line.startsWith( "#" ) || line.length == 0 ) {
              // do nothing; skip
            } else {
              values = line.split( /[ \t]+/ );
              ary.push( values );
            }
          } );
       return ary;
    }


    class Pixelart {
        constructor( pixels, options ) {
          this.pixels = pixels;

          this.colors = options.colors  || { '@': '#000000' }
          this.offset = options.offset  || [0,0];

          this.width  = pixels[0].length; // note: assume all rows the same for now
          this.height = pixels.length;

          console.log( `  width x height: ${this.width} x ${this.height}, offset: ${this.offset}` );
        }

        static parse( str, options ) {
           var pixels = parseAscii( str );
           return new Pixelart( pixels, options );
        }

        draw( ctx, zoom=1 ) {
          this.pixels.forEach( (row, y) => {
                    row.forEach( (pixel, x) => {

             if( pixel != '.' ) {  // auto-skip transparent for now - why? why not?
               ctx.fillStyle = this.colors[pixel];
               ctx.fillRect( x*zoom+this.offset[0]*zoom,
                             y*zoom+this.offset[1]*zoom, zoom, zoom );
             }
            });
          });
        }
    }


    ///////////////////////////
    // some punk pixel art

    const alien_design = `
###
# alien (male) - basic - zero attributes
#
#  colors:
#   0 - transparent
#   1 - black
#
#  size: 24x24

. . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . @ @ @ @ @ @ @ . . . . . . . . .
. . . . . . . @ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . @ @ ^ ^ x @ ^ ^ ^ x @ @ . . . . . . .
. . . . @ ^ o ^ ^ @ o ^ ^ ^ @ o @ . . . . . . .
. . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . @ @ ^ ^ ^ ^ ^ o ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ o ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ o ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ @ @ @ @ @ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . . .
. . . . . . @ ^ ^ ^ @ @ @ @ @ . . . . . . . . .
. . . . . . @ ^ ^ ^ @ . . . . . . . . . . . . .
. . . . . . @ ^ ^ ^ @ . . . . . . . . . . . . .
`;

  const alien = Pixelart.parse( alien_design, {
                                 colors: {
                                    '@':  '#000000',       // color 1 - black
                                    'x':  '#75bdbd',       // color 2 - base 3  (darkest)
                                    'o':  '#9be0e0',       // color 3 - base 2  (darker)
                                    '^':  '#c8fbfb',       // color 4 - base 1
                                  }} );


  const demon_design = `
  ###
# demon (male) - basic - zero attributes
#
#  colors:
#   0 - transparent
#   1 - black
#
#  size: 24x24

. . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . @ @ . . . . . @ @ . . . . . . . .
. . . . . . . @ ^ @ . . . @ ^ @ . . . . . . . .
. . . . . . . @ ^ @ @ @ @ @ ^ @ . . . . . . . .
. . . . . . . @ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ x x ^ ^ ^ x x @ . . . . . . .
. . . . . @ ^ ^ ^ @ o ^ ^ ^ @ o @ . . . . . . .
. . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . @ @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ @ @ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ @ @ @ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . .
. . . . . . @ ^ ^ ^ ^ ^ ^ ^ ^ @ . . . . . . . .
. . . . . . @ ^ ^ ^ @ @ @ @ @ . . . . . . . . .
. . . . . . @ ^ ^ ^ @ . . . . . . . . . . . . .
. . . . . . @ ^ ^ ^ @ . . . . . . . . . . . . .
`;

 const demon = Pixelart.parse( demon_design, {
                                colors: {
                                  '@':  '#000000',       // color 1 - black
                                  'x':  '#390102',       // color 2 - base 3  (darkest)
                                  'o':  '#630006',       // color 3 - base 2  (darker)
                                  '^':  '#850008',       // color 4 - base 1
                                }} );


////////////////////////////////////
// some add-ons / attributes

const cap = Pixelart.parse( `
  . . @ @ @ @ @ @ @ . . . . .
  . @ @ @ @ @ @ x @ @ . . . .
  @ @ @ @ @ @ @ @ x @ . . . .
  @ @ @ @ @ @ @ @ @ @ @ @ @ .
  @ @ @ @ @ @ @ @ @ @ @ @ @ @`, {
    colors: {
      '@': '#8119b7',
     ' x': '#b261dc' },
    offset: [6,4]
   });


const headband = Pixelart.parse( `
    x x x x x x x x x
    @ @ @ @ @ @ @ @ @`, {
     colors: {
      '@': '#1A6ED5',
      'x': '#FFFFFF'
     },
     offset: [7,7]
    });


const lasereyes_design = `
  . . . . @ . . . . . @ . . . .
  . . . . @ . . . . . @ . . . .
  . . . @ x @ . . . @ x @ . . .
  @ x x x o x @ . @ x o x x x @
  . . . @ x @ . . . @ x @ . . .
  . . . . @ . . . . . @ . . . .
  . . . . @ . . . . . @ . . . .
  `;

const lasereyes = Pixelart.parse( lasereyes_design, {
    colors: {    // red-ish
      '@': '#FB1A06',
      'x': '#F85C0F',
      'o': '#FFDB3C',
     },
     offset: [5,8]
    });

const lasereyes_light = Pixelart.parse( lasereyes_design, {
    colors: {  // yellow-ish
      '@': '#E6D300',
      'x': '#FFF799',
      'o': '#FFFFFF',
     },
     offset: [5,8]
    });



    function drawPunk( q, designs, zoom=1 ) {
           // convenience helper / hack; lets you pass in id of canvas element
           //   other assume canvas element passed in (use as is)
          let canvas =  (typeof q === 'string') ?  document.querySelector( q ) : q;

          // note: use width/height from first design
          canvas.width  = designs[0].width*zoom;
          canvas.height = designs[0].height*zoom;

          console.log( ` canvas width x height: ${canvas.width} x ${canvas.height}` );

          let ctx = canvas.getContext( '2d' );

          for( let design of designs ) {
             design.draw( ctx, zoom );
          }
    }
  </script>
</head>
<body>


  <h1>Show Punk in the Pixel Art ("ASCII") Text Format in Web Page</h1>

  <p>
    Yes, you can. Use "View page source" to see  how the "magic" works.
      Or browse the
      <a href="https://github.com/cryptopunksnotdead/cryptopunksnotdead.github.io/blob/master/sandbox/pixelart/index.html">source on github Â»</a>
  </p>

  <canvas id='punk1'></canvas>
  4x <canvas id='punk1x4'></canvas>
  8x <canvas id='punk1x8'></canvas>
  20x <canvas id='punk1x20'></canvas>

  <script>
    // note: add cap to zero-attribute alien "archetype"
    drawPunk( '#punk1',    [alien, cap] );
    drawPunk( '#punk1x4',  [alien, cap], 4 );
    drawPunk( '#punk1x8',  [alien, cap], 8 );
    drawPunk( '#punk1x20', [alien, cap], 20 );
  </script>


<p>
  Let's try another one..
</p>

<canvas id='punk2'></canvas>
4x <canvas id='punk2x4'></canvas>
8x <canvas id='punk2x8'></canvas>
20x <canvas id='punk2x20'></canvas>

<script>
   // note: add headband to zero-attribute demon "archetype"
    drawPunk( '#punk2',    [demon, headband] );
    drawPunk( '#punk2x4',  [demon, headband], 4 );
    drawPunk( '#punk2x8',  [demon, headband], 8 );
    drawPunk( '#punk2x20', [demon, headband], 20 );
</script>


<p>
  Let's try with laser eyes..
</p>

<canvas id='punk3'></canvas>
<canvas id='punk4'></canvas>
4x <canvas id='punk3x4'></canvas>
   <canvas id='punk4x4'></canvas>
8x <canvas id='punk3x8'></canvas>
   <canvas id='punk4x8'></canvas>
20x <canvas id='punk3x20'></canvas>
    <canvas id='punk4x20'></canvas>

<script>
  // note: add laser eyes

  drawPunk( '#punk3',    [demon, headband, lasereyes] );
  drawPunk( '#punk3x4',  [demon, headband, lasereyes], 4 );
  drawPunk( '#punk3x8',  [demon, headband, lasereyes], 8 );
  drawPunk( '#punk3x20', [demon, headband, lasereyes], 20 );

  drawPunk( '#punk4',    [alien, cap, lasereyes_light] );
  drawPunk( '#punk4x4',  [alien, cap, lasereyes_light], 4 );
  drawPunk( '#punk4x8',  [alien, cap, lasereyes_light], 8 );
  drawPunk( '#punk4x20', [alien, cap, lasereyes_light], 20 );
</script>

</body>

